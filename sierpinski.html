<html>
    <head>
        <meta charset="UTF-8" />
        <script src="https://cdn.jsdelivr.net/npm/p5@0.7.2/lib/p5.min.js"></script>
    </head>
    <body>
        <label> Size </label>
        <input type="range" min="0.5" max="10" step="0.01" value="3" oninput="lineSize=this.value" onchange="lineSize=this.value"/>
        <label> Iterations </label>
        <input type="range" min="4" max="10" step="2" value="8" oninput="restart(this.value)" onchange="restart(this.value)"/>
        <br>
    </body>

    <script>

        let instructions = "x";
        let n = 8;
        let lineSize = 3;


        function setup() {
            createCanvas(800, 800);
            stroke(255);
            angleMode(DEGREES);
            restart(n);
        }

        function restart(n) {
            instructions = "x";
            for (let i = 0; i < n; i++) {
                instructions = instructions.split("");
                for (let j = instructions.length-1; j >= 0; j--) {
                    if (instructions[j] == "x") {
                        instructions[j] = "y+x+y";
                    } else if (instructions[j] == "y") {
                        instructions[j] = "x-y-x";
                    }
                }
                instructions = instructions.join("");
            }
        }

        function draw() {
            background(0);
            translate(width * 0.05, height * 0.95);

            for (let i = 1; i < instructions.length; i += 2) {
                line(0, 0, lineSize, 0);
                translate(lineSize, 0);
                if (instructions[i] == "+") {
                    rotate(60);
                } else {
                    rotate(-60);
                }

            }
        }

    </script>

</html>
